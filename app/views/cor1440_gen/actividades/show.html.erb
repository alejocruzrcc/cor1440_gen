<%- model_class = Cor1440Gen::Actividad -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:id) %>:</strong></dt>
  <dd><%= @actividad.id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:nombre) %>:</strong></dt>
  <dd><%= @actividad.nombre %></dd>
  <dt><strong><%= model_class.human_attribute_name(:fecha) %>:</strong></dt>
  <dd><%= @actividad.fecha %></dd>
  <dt><strong><%= model_class.human_attribute_name(:oficina) %>:</strong></dt>
  <dd><%= @actividad.oficina.nombre if @actividad.oficina %></dd>
  <dt><strong><%= model_class.human_attribute_name(:tipos) %>:</strong></dt>
  <dd><%= @actividad.actividadtipo.inject("") { |memo, i| 
    (memo == "" ? "" : memo + "; ") + i.nombre
  } %></dd>
  <dt><strong><%= model_class.human_attribute_name(:proyectos) %>:</strong></dt>
  <dd><%= @actividad.proyecto.inject("") { |memo, i| 
    (memo == "" ? "" : memo + "; ") + i.nombre
  } %></dd>
  <dt><strong><%= model_class.human_attribute_name(:areas) %>:</strong></dt>
  <dd><%= @actividad.actividadareas.inject("") { |memo, i| 
    (memo == "" ? "" : memo + "; ") + i.nombre
  } %></dd>
  <dt><strong><%= model_class.human_attribute_name(:responsable) %>:</strong></dt>
  <dd><%= @actividad.responsable.nusuario if @actividad.responsable %></dd>
  <dt><strong><%= model_class.human_attribute_name(:corresponsables) %>:</strong></dt>
  <dd><%= @actividad.usuario.inject("") { |memo, i| 
    (memo == "" ? "" : memo + "; ") + i.nombre
  } %></dd>
  <dt><strong><%= model_class.human_attribute_name(:objetivo) %>:</strong></dt>
  <dd><%= @actividad.objetivo %></dd>
  <dt><strong><%= model_class.human_attribute_name(:poblacion) %>:</strong></dt>
  <dd><%= 
    r=@actividad.actividad_rangoedadac.map { |i| 
      t= (i.ml ? i.ml : 0) + (i.mr ? i.mr : 0) +
        (i.fl ? i.fl : 0) + (i.fr ? i.fr : 0)
      i.rangoedadac.nombre + ": " + t.to_s 
    } 
    r.join("; ")
    %></dd>
  <dt><strong><%= model_class.human_attribute_name(:resultado) %>:</strong></dt>
  <dd><%= @actividad.resultado %></dd>
  <dt>
    <strong><%= model_class.human_attribute_name(:observaciones) %>:</strong>
  </dt>
  <dd><%= @actividad.observaciones %></dd>
  <dt><strong><%= model_class.human_attribute_name(:anexos) %>:</strong></dt>
  <dd><% 
    sep=""
    @actividad.sip_anexo.each do |i| 
      if (i.descripcion.size > 20)
        d = i.descripcion.slice(0,20) + ' ...'
      else
        d = i.descripcion
      end %>
      <%= sep %> 
      <%= link_to(d, sip.descarga_anexo_path(i.id)) %>
      <% sep = "; ";
    end %>
  </dd>

</dl>

<div class="form-actions">
  <%= link_to t('.back', :default => t("helpers.links.back")),
    cor1440_gen.actividades_path, :class => 'btn'  %>
    <%= link_to t('.edit', :default => t("helpers.links.edit")),
      cor1440_gen.edit_actividad_path(@actividad), :class => 'btn' %>
      <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
        cor1440_gen.actividad_path(@actividad),
        :method => 'delete',
        :data => { :confirm => 
          t('.confirm', :default => t("helpers.links.confirm", 
                                      :default => 'Are you sure?')) },
                                      :class => 'btn btn-danger' 
                                    %>
                                  </div>
